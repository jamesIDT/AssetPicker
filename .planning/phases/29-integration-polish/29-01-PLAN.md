---
phase: 29-integration-polish
plan: 01
type: execute
---

<objective>
Complete v5.0 Predictive Signal Detection milestone with ranked signal list and cross-quadrant highlighting.

Purpose: Surface the strongest "about to pop" signals in a ranked list with interactive highlighting across both predictive quadrants.
Output: Functional ranked signal list, coin highlight selection, v5.0 milestone complete.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase summaries (dependencies):
@.planning/phases/27-predictive-signal-quadrants/27-01-SUMMARY.md
@.planning/phases/28-signal-persistence/28-01-SUMMARY.md

# Key source files:
@app.py
@src/indicators.py
@src/charts.py

**Tech stack available:**
- Plotly for charts (build_rsi_price_quadrant, build_signal_persistence_quadrant)
- Streamlit for UI (bordered-panel, section-header patterns)
- Signal persistence data: current_gap, persistence, avg_gap, interpretation

**Established patterns:**
- Opportunity Leaderboard table structure (bordered-panel, dataframe styling)
- highlight_tf pattern for timeframe highlighting (session state + chart parameter)
- Gap score formula: RSI_accel - Price_accel (positive = RSI leading)

**Constraining decisions:**
- Phase 28: Persistence threshold of 2 periods, gap score threshold of 2
- Phase 27: Gap score coloring uses RdYlGn scale

**ROADMAP deliverables for Phase 29:**
- ~~Row 2 layout~~ (DONE - pred_col1/pred_col2 in PREDICTIVE SIGNALS section)
- Ranked "about to pop" signal list
- ~~Consistent theming~~ (Already matches existing dark theme)
- Cross-quadrant interaction (highlight coin across both quadrants)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create "About to Pop" ranked signal list</name>
  <files>app.py</files>
  <action>
Add a new bordered panel below the predictive quadrants section showing ranked signals:

1. Create section after pred_col2 context manager closes (around line 2051):
   - Use existing bordered-panel + panel-title pattern
   - Title: "About to Pop â€” Ranked Signals"

2. Build ranked signal data:
   - Filter coins with signal_persistence data where interpretation != "none"
   - Calculate composite score: (persistence * 2) + current_gap
   - Sort descending by composite score
   - Show top 10 by default with "Show all" checkbox

3. Table columns:
   - Rank (1, 2, 3...)
   - Symbol (coin symbol)
   - Gap Score (current_gap from persistence data)
   - Persistence (periods count)
   - Signal (interpretation emoji: strong_coiled=ðŸ”¥, building=ðŸ“ˆ, weak=ðŸ’¤)
   - Score (composite score, rounded to 1 decimal)

4. Style with st.dataframe:
   - Use column_config for proper widths
   - Match Opportunity Leaderboard styling
   - Add caption explaining the ranking

Avoid: Creating a separate function for this - inline in app.py like Opportunity Leaderboard. Keep it simple.
  </action>
  <verify>
Run app (`streamlit run app.py`) and verify:
- New panel appears below predictive quadrants
- Coins with persistence data are ranked correctly
- Score calculation is (persistence * 2) + gap_score
- Emojis display correctly for interpretation
  </verify>
  <done>
"About to Pop" panel displays ranked list with correct columns, sorting, and styling.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add coin highlight selection for cross-quadrant interaction</name>
  <files>app.py, src/charts.py</files>
  <action>
Add coin selection dropdown that highlights selected coin in both predictive quadrants:

**In app.py:**
1. Add session state for highlighted coin (line ~715):
   ```python
   if "highlight_coin" not in st.session_state:
       st.session_state.highlight_coin = None
   ```

2. Add selectbox in PREDICTIVE SIGNALS section header area (before pred_col1/pred_col2):
   - Build list of coin symbols from filtered_coin_data
   - Selectbox with "None" + sorted coin symbols
   - Store selection in st.session_state.highlight_coin
   - Use horizontal layout: header on left, selectbox on right

3. Pass highlight_coin to both chart functions:
   - build_rsi_price_quadrant(..., highlight_coin=st.session_state.highlight_coin)
   - build_signal_persistence_quadrant(..., highlight_coin=st.session_state.highlight_coin)

**In src/charts.py:**
1. Update build_rsi_price_quadrant signature to accept highlight_coin parameter
2. Update build_signal_persistence_quadrant signature to accept highlight_coin parameter
3. In both functions, when highlight_coin is set:
   - Find the marker for that coin
   - Increase marker size by 1.5x
   - Add marker_line_width=3, marker_line_color='#FFB020' (accent color) for glow effect
   - Other markers get reduced opacity (0.4 instead of 0.8)

Avoid: Over-engineering - no need for multi-select. Simple single coin highlight.
  </action>
  <verify>
Run app and verify:
1. Selectbox appears in PREDICTIVE SIGNALS section
2. Selecting a coin highlights it in BOTH quadrants
3. Highlighted coin has larger marker with orange border
4. Other coins are faded when one is highlighted
5. Selecting "None" restores normal view
  </verify>
  <done>
Coin selection dropdown works, highlighted coin visible in both quadrants with glow effect.
  </done>
</task>

<task type="auto">
  <name>Task 3: Finalize v5.0 milestone and update STATE.md</name>
  <files>.planning/STATE.md, .planning/ROADMAP.md</files>
  <action>
1. Update ROADMAP.md:
   - Mark Phase 29 as complete with today's date
   - Update Progress table: Phase 29 row to Complete
   - Change v5.0 header from ðŸš§ to âœ…

2. Update STATE.md:
   - Phase: 29 of 29 (Integration & Polish)
   - Status: Phase complete
   - Progress bar: 100%
   - Add v5.0 to Milestones Completed table
   - Clear any resume file references
   - Update Performance Metrics with Phase 29 timing
  </action>
  <verify>
Review both files:
- ROADMAP shows v5.0 SHIPPED with all phases complete
- STATE shows 100% progress, milestone in completed table
- No errors in markdown formatting
  </verify>
  <done>
v5.0 milestone marked complete in both STATE.md and ROADMAP.md
  </done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] App runs without errors (`streamlit run app.py`)
- [ ] "About to Pop" ranked list displays correctly
- [ ] Coin highlight selection works across both quadrants
- [ ] ROADMAP.md shows v5.0 complete
- [ ] STATE.md shows 100% progress
</verification>

<success_criteria>
- All 3 tasks completed
- Ranked signal list shows coins ordered by composite score
- Cross-quadrant highlighting works via dropdown selection
- v5.0 milestone documentation complete
- No TypeScript/Python errors
</success_criteria>

<output>
After completion, create `.planning/phases/29-integration-polish/29-01-SUMMARY.md`
</output>
