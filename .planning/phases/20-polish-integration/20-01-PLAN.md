---
phase: 20-polish-integration
plan: 01
type: execute
---

<objective>
Final visual polish and cleanup of the v3.0 dashboard redesign.

Purpose: Remove redundant elements, ensure consistent styling, and polish loading/error states for a professional finish.
Output: Clean, polished dashboard with no redundant UI elements and consistent styling throughout.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-component-refinement/18-01-SUMMARY.md
@.planning/phases/19-legends-onboarding/19-01-SUMMARY.md
@app.py
@src/charts.py

**Design decisions:**
- Dark theme with cream text (#FFFFE3) on dark gray (#4A4A4A)
- Yellow-orange accent (#FFB020)
- JetBrains Mono typography
- Panel backgrounds: rgba(109, 129, 150, 0.15)

**Prior work:**
- Phase 18: Dark-themed components, ProgressColumn score bars, gold star conviction
- Phase 19: Collapsible "How to Read" panel, minimal corner legend

**Target cleanup:**
- "Potential Opportunities" and "Exercise Caution" lists at lines 1073-1111 are redundant — Opportunity Leaderboard now provides superior functionality with scores, factors, and filtering
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove redundant opportunity/caution lists</name>
  <files>app.py</files>
  <action>Remove the "Potential Opportunities" and "Exercise Caution" section (lines ~1071-1111). This includes:
  - The st.markdown("---") separator before the lists
  - The st.caption explaining the lists
  - Both the opportunities and caution column display blocks

  The Opportunity Leaderboard with Long/Short tabs now provides this functionality with better scoring, filtering, and factor visibility. Keep the "Market Analysis" section that follows.</action>
  <verify>Run `streamlit run app.py` — no "Potential Opportunities" or "Exercise Caution" sections appear. Leaderboard and Sector Momentum panels still display correctly.</verify>
  <done>Redundant lists removed. Dashboard shows Regime banner → How to Read expander → charts → Market Analysis section (Leaderboard + Sector Momentum) → Signal Lifecycle.</done>
</task>

<task type="auto">
  <name>Task 2: Style loading and error states</name>
  <files>app.py</files>
  <action>Update loading spinner and error states to match dark theme:

  1. Loading spinner (st.spinner): Add custom CSS to style the spinner with accent color:
     - Add CSS rule for `.stSpinner > div` to use var(--accent) color

  2. Error states (st.error): Already themed by Streamlit's dark mode, but verify the red background contrasts well. Add CSS if needed:
     - `.stAlert` background should use dark red with cream text

  3. Warning states (st.warning): Similarly verify/style yellow warning
     - `.stAlert` for warning should use dark orange/yellow tint

  4. Info states (st.info): Style blue info boxes
     - `.stAlert` for info should use dark blue tint

  Add these CSS rules to the existing design system CSS block in app.py (after the scrollbar styling section).</action>
  <verify>Click "Refresh Data" and observe spinner uses accent color. Disconnect network and refresh to see styled error state. Check st.info messages in empty panels.</verify>
  <done>Loading spinner styled with accent color. Error/warning/info alerts have dark-themed backgrounds with cream text, matching the dashboard aesthetic.</done>
</task>

<task type="auto">
  <name>Task 3: Polish spacing and alignment</name>
  <files>app.py</files>
  <action>Review and fix any spacing inconsistencies:

  1. Reduce excessive vertical gaps between sections — add CSS to reduce default Streamlit block margins:
     - Target `.element-container` or `.stMarkdown` if gaps are too large

  2. Ensure "Market Analysis" subheader has consistent spacing with panels below

  3. Verify the empty state message (when no data loaded) has proper padding

  Only add CSS rules if visual inspection shows clear issues. Don't over-engineer — the goal is a polished feel, not pixel perfection.</action>
  <verify>Visual inspection: sections flow naturally without excessive whitespace. Compare before/after by checking git diff of CSS changes.</verify>
  <done>Spacing is consistent throughout. No jarring gaps or cramped sections. Dashboard feels cohesive.</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `streamlit run app.py` launches without errors
- [ ] No "Potential Opportunities" or "Exercise Caution" lists visible
- [ ] Loading spinner uses accent color (#FFB020)
- [ ] Error/warning/info states are readable on dark theme
- [ ] Spacing between sections is consistent
- [ ] Leaderboard + Sector Momentum panels display correctly
- [ ] Signal Lifecycle expander still works
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No visual regressions from v3.0 work
- Dashboard is clean, polished, and professional
- v3.0 UX Dashboard Redesign milestone complete
</success_criteria>

<output>
After completion, create `.planning/phases/20-polish-integration/20-01-SUMMARY.md`:

# Phase 20 Plan 01: Polish & Integration Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `app.py` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

[v3.0 complete, ready for release]
</output>
