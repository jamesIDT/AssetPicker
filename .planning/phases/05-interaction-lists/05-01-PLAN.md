---
phase: 05-interaction-lists
plan: 01
type: execute
---

<objective>
Add visual zone shading, enhanced tooltips, and opportunity/caution summary lists with RSI alignment indicators.

Purpose: Make the visualization immediately actionable by highlighting extreme zones and listing opportunities/risks.
Output: Enhanced chart with zone shading, complete tooltips, and filtered lists below the chart.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-core-visualization/04-01-SUMMARY.md

**Key files:**
@src/charts.py
@app.py

**Tech stack available:** Streamlit, Plotly, session state pattern
**Established patterns:** RdYlGn_r colorscale, log Y-axis, session state init, async data fetch

**Constraining decisions:**
- Phase 4: RdYlGn_r colorscale (red=overbought, green=oversold)
- Phase 4: Skip coins where RSI is None
- PROJECT.md: Classic 30/70 RSI thresholds
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add zone shading and enhance tooltips</name>
  <files>src/charts.py</files>
  <action>
    1. Add two vertical rectangles (vrect shapes) to the figure:
       - Green shaded zone from x=0 to x=30 (oversold) with opacity ~0.1
       - Red shaded zone from x=70 to x=100 (overbought) with opacity ~0.1
    2. Enhance hovertemplate to include all data: name (not just symbol), price formatted with $ and commas, volume formatted with $ and abbreviations (M/B), market cap formatted similarly.

    Use fig.add_vrect() for zone shading. Keep zones behind points (layer="below").
    Format price with locale-aware thousands separator. For volume/mcap, use simple formatting like "$1.2B" or "$450M".
  </action>
  <verify>Run `streamlit run app.py`, click Refresh, verify green/red shaded zones appear at chart edges and hover shows full coin details</verify>
  <done>Chart has green zone 0-30, red zone 70-100, and tooltips show name, price, volume, mcap with proper formatting</done>
</task>

<task type="auto">
  <name>Task 2: Add opportunity and caution lists with alignment indicator</name>
  <files>app.py</files>
  <action>
    Below the chart, add two side-by-side columns:

    Left column - "Potential Opportunities" (daily RSI < 30):
    - Filter coin_data for daily_rsi < 30
    - Sort by daily_rsi ascending (most oversold first)
    - Display each coin as: SYMBOL - Daily: XX.X | Weekly: XX.X ⭐
    - Add ⭐ only if weekly_rsi < 30 too (aligned extreme)

    Right column - "Exercise Caution" (daily RSI > 70):
    - Filter coin_data for daily_rsi > 70
    - Sort by daily_rsi descending (most overbought first)
    - Display each coin as: SYMBOL - Daily: XX.X | Weekly: XX.X ⭐
    - Add ⭐ only if weekly_rsi > 70 too (aligned extreme)

    Use st.columns(2) for side-by-side layout.
    Use st.subheader() for list titles.
    If a list is empty, show "None currently" message.
  </action>
  <verify>Run app, click Refresh, verify two lists appear below chart with correct filtering and star indicators for aligned RSI</verify>
  <done>Opportunity list shows coins with daily RSI < 30 sorted by extremity, caution list shows coins with daily RSI > 70 sorted by extremity, stars appear when weekly RSI aligns</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `streamlit run app.py` runs without errors
- [ ] Green zone visible from 0-30 on chart
- [ ] Red zone visible from 70-100 on chart
- [ ] Hover tooltips show: name, symbol, price, volume, mcap, both RSI values
- [ ] "Potential Opportunities" list shows coins with daily RSI < 30
- [ ] "Exercise Caution" list shows coins with daily RSI > 70
- [ ] ⭐ appears when both daily AND weekly RSI are in same extreme zone
- [ ] Lists sorted by extremity (most extreme first)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No Streamlit errors or warnings
- Chart zones and lists match PROJECT.md requirements
- Phase 5 deliverables from ROADMAP.md complete
</success_criteria>

<output>
After completion, create `.planning/phases/05-interaction-lists/05-01-SUMMARY.md`:

# Phase 5 Plan 1: Interaction & Lists Summary

**[Substantive one-liner]**

## Performance

- **Duration:** X min
- **Tasks:** 2
- **Files modified:** 2

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Task Commits

1. **Task 1: Zone shading + tooltips** - `hash` (feat)
2. **Task 2: Opportunity/caution lists** - `hash` (feat)

## Files Created/Modified

- `src/charts.py` - Zone shading, enhanced tooltips
- `app.py` - Opportunity and caution lists with alignment stars

## Decisions Made

[Any decisions]

## Deviations from Plan

[None or describe]

## Issues Encountered

[None or describe]

## Next Phase Readiness

- Ready for Phase 6: Polish (refresh UI, loading states, error handling)
</output>
