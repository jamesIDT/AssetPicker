# Milestone v2.0: Advanced Screening

**Status:** SHIPPED 2026-01-24
**Phases:** 7-14
**Total Plans:** 13
**Commits:** 49
**Lines Added:** 5,521

## Overview

Transform the basic RSI screener into a multi-dimensional opportunity detection system with regime awareness, divergence detection, sector analysis, funding rate confluence, and composite scoring.

## Key Accomplishments

1. **Multi-factor opportunity scoring** â€” Composite decay score combining z-score, freshness, weekly alignment, divergence, volatility compression, sector momentum, funding confluence, and decorrelation
2. **Visual divergence markers** â€” Bull/bear shape encoding (+/â—†) with ring-based scoring (thin ring = score 2, bold ring = score 4)
3. **Sector rotation detection** â€” Market-cap weighted sector RSI with 7-day momentum and rotation signals (RSI < 35 AND rising)
4. **Acceleration Quadrant** â€” New 4-zone chart (RSI acceleration Ã— volatility regime) identifying "coiled spring" opportunities
5. **Signal lifecycle classification** â€” Fresh/Confirmed/Extended/Resolving stages with conviction ratings (â˜…â˜…â˜… = fresh + compressed)
6. **Funding rate confluence** â€” Binance/Bybit perpetual funding rates with open interest for positioning imbalance detection

## Phases

### Phase 7: Data Layer Extensions

**Goal**: Build all calculation engines before any UI work
**Depends on**: Phase 6 (v1.0 complete)
**Plans**: 4 plans

Plans:
- [x] 07-01: Core Indicators Foundation (regime, acceleration, divergence)
- [x] 07-02: Statistical Analysis (z-score, mean reversion probability)
- [x] 07-03: Multi-Timeframe Analysis (multi-TF divergence, signal lifecycle, volatility regime)
- [x] 07-04: Composite Scoring (opportunity decay score)

**Calculations Implemented:**
- Regime Transition Detection â€” BTC weekly RSI trend + momentum for bull/bear/transition states
- RSI Acceleration â€” Second derivative of RSI (velocity + acceleration)
- Z-Score Thresholds â€” Per-coin rolling mean/stddev for statistical extreme detection
- Mean Reversion Probability â€” Historical success rate at similar RSI levels
- Beta-Adjusted Relative Strength â€” Each coin's beta to BTC, expected vs actual RSI
- Sector Classification â€” Group coins by narrative (Majors, DeFi, AI, DeSci)
- Multi-Timeframe Divergence â€” Daily + weekly divergence detection with scoring (1/2/4)
- Signal Lifecycle State â€” Fresh/Confirmed/Extended/Resolving classification
- Volatility Regime â€” ATR compression/expansion detection
- Opportunity Decay Score â€” Composite formula with time decay

### Phase 8: Funding Rate Integration

**Goal**: Integrate free Binance/Bybit APIs for perpetual futures positioning data
**Depends on**: Phase 7
**Plans**: 2 plans

Plans:
- [x] 08-01: Funding Rate Fetcher (Binance/Bybit APIs)
- [x] 08-02: Positioning Matrix (OI changes, confluence detection)

**Delivered:**
- Funding rate fetcher for coins with perp markets
- Open interest change tracking
- Positioning matrix (crowded long/short detection)
- Confluence flags when funding aligns with RSI extremes

### Phase 9: Visual Marker System

**Goal**: Implement custom divergence icons with scoring visualization on scatter plot
**Depends on**: Phase 7
**Plans**: 1 plan

Plans:
- [x] 09-01: Divergence Markers and Scoring

**Visual Encoding:**
- Bullish divergence: Plus sign (+) shape
- Bearish divergence: Diamond (â—†) shape
- Score 1 (single timeframe): Bold inner shape only
- Score 2 (strong single): Bold inner + thin outer ring
- Score 4 (multi-timeframe): Bold inner + bold outer ring
- Neutral: Standard circle

### Phase 10: Main Chart Enhancements

**Goal**: Enhance existing scatter plot with regime context, beta coloring, sector strength
**Depends on**: Phase 7, Phase 8
**Plans**: 2 plans

Plans:
- [x] 10-01: Regime Banner and Color Modes
- [x] 10-02: Sector Badges and Z-Score Labels

**Enhancements:**
- Regime banner showing current BTC regime (Bull â†—, Bull â†˜, Bear â†—, Bear â†˜, Transition)
- Beta-adjusted color mode (residual vs expected RSI)
- Sector-relative badges (best/worst in sector)
- Optional z-score labels (-2.3Ïƒ display)
- Toggle controls between color modes

### Phase 11: Signal Lifecycle Display

**Goal**: New combined view showing signal lifecycle + volatility context
**Depends on**: Phase 7
**Plans**: 1 plan

Plans:
- [x] 11-01: Signal Lifecycle Table

**Components:**
- Signal lifecycle table with stage badges (ðŸ†• Fresh, âœ“ Confirmed, â³ Extended, â†— Resolving)
- Days in zone tracking
- Price change since signal
- Volatility context column (âš¡ Compressed, ðŸŒŠ High Vol)
- Conviction ratings (â˜…â˜…â˜… = Fresh + Compressed)

### Phase 12: Sector Momentum View

**Goal**: Sector rotation visualization
**Depends on**: Phase 7
**Plans**: 1 plan

Plans:
- [x] 12-01: Sector Momentum Chart

**Components:**
- Horizontal bar chart showing sector RSI
- 7-day momentum arrows (â†— rising, â†˜ falling, â†’ flat)
- Rotation signals (RSI < 35 AND 7d change > 0)
- Days since sector bottom
- Drill-down filtering to sector coins

### Phase 13: Acceleration Quadrant

**Goal**: New quadrant display combining RSI acceleration + volatility regime
**Depends on**: Phase 7
**Plans**: 1 plan

Plans:
- [x] 13-01: Acceleration Quadrant Chart

**Quadrants:**
| Position | Meaning |
|----------|---------|
| Top-Right | Accelerating + High Vol = Explosive move in progress |
| Top-Left | Decelerating + High Vol = Move exhausting |
| Bottom-Right | Accelerating + Compressed = Coiled spring (BEST SIGNAL) |
| Bottom-Left | Decelerating + Compressed = Dormant |

### Phase 14: Opportunity Leaderboard

**Goal**: Final integration â€” ranked table with composite decay score
**Depends on**: All prior phases (7-13)
**Plans**: 1 plan

Plans:
- [x] 14-01: Opportunity Leaderboard Table

**Score Formula:**
```
Score = Base_Score Ã— Freshness_Multiplier Ã— Confluence_Multiplier

Where:
Base_Score = abs(Z-score of RSI)
Freshness = 1.0 if signal < 3 days, decay to 0.3 at 14+ days
Confluence = 1.0 + sum of:
  - Weekly RSI also extreme: +0.2
  - Divergence present: +0.3 (or +0.5 for multi-TF)
  - Positive decorrelation: +0.2
  - Volatility compressed: +0.2
  - Sector turning: +0.1
  - Funding alignment: +0.2
```

**Display:**
- Ranked table sorted by opportunity score
- Score breakdown (Base, Freshness, Confluence)
- Long/Short tabs for signal direction
- Quick filters (sector, minimum score, signal age)
- Factor icons for confluence visualization

---

## Post-UAT Fixes

Two issues were discovered during UAT and fixed:

1. **Chart legend enhancement** (`880a70f`) â€” Added comprehensive divergence scoring table and color mode explanations as legend annotations
2. **Filter persistence** (`4c4eda7`) â€” Fixed sector dropdown to persist when switching between Long/Short tabs

---

## Milestone Summary

**Key Decisions:**
- Divergence markers: + for bullish, â—† for bearish, with ring layering for scores
- Sector classification: Majors, DeFi, AI, DeSci based on 48-coin watchlist
- Conviction rating: â˜…â˜…â˜… = fresh + compressed volatility
- Opportunity score: Multiplicative formula (base Ã— freshness Ã— confluence)
- Signal direction: daily RSI < 50 = long opportunity, >= 50 = short opportunity

**Issues Resolved:**
- Filter persistence across Long/Short tabs
- Chart legend clarity for naive users

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
